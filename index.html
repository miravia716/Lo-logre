<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Trivial de Adrián</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  /* Animaciones para botones */
  button:focus {
    outline: none;
    box-shadow: 0 0 8px 2px #3b82f6;
  }
  .fade-enter {
    opacity: 0;
    transform: translateY(10px);
  }
  .fade-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }
</style>
</head>
<body class="bg-gradient-to-br from-blue-900 to-blue-700 text-gray-100 min-h-screen flex flex-col">

<header class="bg-blue-800 p-6 text-center text-4xl font-extrabold tracking-wide select-none shadow-lg">
  Bienvenidos al trivial de Adrián
</header>

<main class="flex-grow flex flex-col justify-center items-center p-6">
  <section id="menu" class="bg-white bg-opacity-10 rounded-xl p-10 max-w-3xl w-full shadow-lg text-center">
    <h2 class="text-3xl mb-6 font-semibold">¡Comienza el juego!</h2>
    <button id="startBtn" 
            class="bg-blue-600 hover:bg-blue-700 active:scale-95 transition transform duration-150 text-white font-semibold py-3 px-6 rounded-xl max-w-xs w-full focus:ring-4 focus:ring-blue-400"
            aria-label="Empezar el trivial">
      Empezar
    </button>
  </section>

  <section id="quiz" class="hidden bg-white bg-opacity-10 rounded-xl p-10 max-w-3xl w-full shadow-lg text-center flex flex-col">
    <div id="timer" class="text-yellow-400 font-semibold text-lg text-right mb-4 select-none">Tiempo: 06:00</div>
    <div id="question" class="text-2xl min-h-[5rem] mb-8"></div>
    <div id="options" class="flex flex-col gap-4"></div>
  </section>

  <section id="resultado" class="hidden bg-white bg-opacity-10 rounded-xl p-10 max-w-3xl w-full shadow-lg text-center">
    <h2 class="text-3xl mb-6 font-semibold">¡Juego terminado!</h2>
    <p id="scoreText" class="text-xl mb-6"></p>
    <button id="restartBtn" 
            class="bg-blue-600 hover:bg-blue-700 active:scale-95 transition transform duration-150 text-white font-semibold py-3 px-6 rounded-xl max-w-xs w-full focus:ring-4 focus:ring-blue-400"
            aria-label="Reiniciar el juego">
      Jugar de nuevo
    </button>
  </section>
</main>

<script>
  // Preguntas ejemplo de brote psicótico, dificultad intermedia y difícil
  const preguntasDisponibles = [
    // Dificultad intermedia (5 preguntas ejemplo)
    {
      category: "brote psicótico",
      question: "¿Cuál es uno de los síntomas característicos de un brote psicótico?",
      options: ["Alucinaciones", "Fiebre alta", "Dolor abdominal", "Pérdida de apetito"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué tratamiento se recomienda para un brote psicótico agudo?",
      options: ["Antipsicóticos", "Antibióticos", "Antiinflamatorios", "Antihistamínicos"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Cuál de estos es un factor de riesgo para un brote psicótico?",
      options: ["Estrés severo", "Ejercicio intenso", "Buena alimentación", "Sueño adecuado"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué tipo de alucinaciones son más comunes en un brote psicótico?",
      options: ["Auditivas", "Visuales", "Olfativas", "Gustativas"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿En qué fase del brote psicótico suelen aparecer los delirios?",
      options: ["Fase activa", "Fase de remisión", "Fase prodromal", "Fase de recuperación"],
      correctIndex: 0
    },

    // Dificultad difícil (15 preguntas)
    {
      category: "brote psicótico",
      question: "¿Qué neurotransmisor se ve más implicado en la fisiopatología del brote psicótico?",
      options: ["Dopamina", "Serotonina", "GABA", "Acetilcolina"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Cuál es una complicación grave posible de un brote psicótico no tratado?",
      options: ["Suicidio", "Hipertensión", "Diabetes", "Infarto de miocardio"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué prueba se utiliza para descartar causas orgánicas en un brote psicótico?",
      options: ["Resonancia magnética cerebral", "Radiografía de tórax", "Electrocardiograma", "Ecografía abdominal"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué término describe una creencia falsa y fija presente en el brote psicótico?",
      options: ["Delirio", "Alucinación", "Obsesión", "Compulsión"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué medicamento se usa para tratar un brote psicótico agudo con síntomas catatónicos?",
      options: ["Lorazepam", "Paracetamol", "Ibuprofeno", "Amoxicilina"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Cuál de estas NO es una característica de la esquizofrenia, que puede presentar brotes psicóticos?",
      options: ["Hipertensión arterial", "Alogia", "Aplanamiento afectivo", "Ideas delirantes"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Cuál es el papel de la terapia electroconvulsiva en brotes psicóticos?",
      options: ["Tratamiento en casos refractarios", "Prevención primaria", "No tiene ningún papel", "Tratamiento para ansiedad leve"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué escala clínica se utiliza para medir la severidad de síntomas psicóticos?",
      options: ["PANSS", "Hamilton", "Glasgow", "Beck"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Cuál es un efecto secundario común de los antipsicóticos típicos?",
      options: ["Síntomas extrapiramidales", "Hipotensión ortostática", "Hiperglucemia", "Pérdida auditiva"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué rol juega el ambiente social en la evolución del brote psicótico?",
      options: ["Es un factor modulador importante", "No tiene influencia", "Solo afecta en la adolescencia", "Solo afecta en ancianos"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Cuál es la duración mínima para que se considere un brote psicótico crónico?",
      options: ["Más de 6 meses", "Más de 1 mes", "Más de 1 año", "Más de 3 meses"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué diferencia principal existe entre brote psicótico y trastorno esquizofreniforme?",
      options: ["Duración menor a 6 meses", "Gravedad de síntomas", "Tipo de alucinaciones", "Edad de inicio"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué laboratorio puede estar alterado en brotes psicóticos secundarios a abuso de sustancias?",
      options: ["Toxicología positiva", "Glucosa baja", "Colesterol alto", "Función hepática alterada"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué actitud se recomienda para familiares de personas con brotes psicóticos?",
      options: ["Apoyo y búsqueda de tratamiento", "Ignorar los síntomas", "Disciplina estricta", "Evitar el contacto"],
      correctIndex: 0
    },
    {
      category: "brote psicótico",
      question: "¿Qué pronóstico tiene un brote psicótico tratado adecuadamente a largo plazo?",
      options: ["Posibilidad de remisión completa", "Siempre crónico", "Peor que sin tratamiento", "No cambia el pronóstico"],
      correctIndex: 0
    }
  ];

  let tiempoTotal = 360; // 6 minutos en segundos
  let timerInterval;
  let puntuacion = 0;
  let preguntaActual = 0;

  const menu = document.getElementById('menu');
  const quiz = document.getElementById('quiz');
  const resultado = document.getElementById('resultado');

  const startBtn = document.getElementById('startBtn');
  const restartBtn = document.getElementById('restartBtn');

  const timerEl = document.getElementById('timer');
  const questionEl = document.getElementById('question');
  const optionsEl = document.getElementById('options');
  const scoreText = document.getElementById('scoreText');

  startBtn.addEventListener('click', iniciarJuego);
  restartBtn.addEventListener('click', reiniciarJuego);

  function iniciarJuego() {
    puntuacion = 0;
    preguntaActual = 0;
    menu.classList.add('hidden');
    resultado.classList.add('hidden');
    quiz.classList.remove('hidden');
    tiempoTotal = 360;
    mostrarPregunta();
    iniciarTemporizador();
  }

  function reiniciarJuego() {
    tiempoTotal = 360;
    puntuacion = 0;
    preguntaActual = 0;
    resultado.classList.add('hidden');
    quiz.classList.remove('hidden');
    mostrarPregunta();
    iniciarTemporizador();
  }

  function iniciarTemporizador() {
    clearInterval(timerInterval);
    actualizarTimer();
    timerInterval = setInterval(() => {
      tiempoTotal--;
      if (tiempoTotal <= 0) {
        clearInterval(timerInterval);
        finalizarJuego();
      }
      actualizarTimer();
    }, 1000);
  }

  function actualizarTimer() {
    const minutos = Math.floor(tiempoTotal / 60);
    const segundos = tiempoTotal % 60;
    timerEl.textContent = `Tiempo: ${minutos.toString().padStart(2,'0')}:${segundos.toString().padStart(2,'0')}`;
  }

  function mostrarPregunta() {
    if (preguntaActual >= preguntasDisponibles.length) {
      finalizarJuego();
      return;
    }
    const pregunta = preguntasDisponibles[preguntaActual];
    questionEl.textContent = `[${pregunta.category}] ${pregunta.question}`;
    optionsEl.innerHTML = '';

    pregunta.options.forEach((opcion, i) => {
      const btn = document.createElement('button');
      btn.textContent = opcion;
      btn.className = "bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-400 text-white font-semibold py-3 px-6 rounded-xl max-w-xs w-full transition transform duration-150 active:scale-95";
      btn.setAttribute('type','button');
      btn.setAttribute('aria-label', `Opción ${i+1}: ${opcion}`);
      btn.addEventListener('click', () => responder(i));
      optionsEl.appendChild(btn);
    });
  }

  function responder(indiceSeleccionado) {
    const botones = optionsEl.querySelectorAll('button');
    botones.forEach((btn, i) => {
      btn.disabled = true;
      if(i === preguntasDisponibles[preguntaActual].correctIndex) {
        btn.classList.add('bg-green-600', 'ring-4', 'ring-green-400');
      }
      if(i === indiceSeleccionado && i !== preguntasDisponibles[preguntaActual].correctIndex) {
        btn.classList.add('bg-red-600', 'ring-4', 'ring-red-400');
      }
    });

    if(indiceSeleccionado === preguntasDisponibles[preguntaActual].correctIndex) {
      puntuacion++;
    }

    preguntaActual++;

    setTimeout(() => {
      if(preguntaActual < preguntasDisponibles.length) {
        mostrarPregunta();
      } else {
        finalizarJuego();
      }
    }, 1400);
  }

  function finalizarJuego() {
    clearInterval(timerInterval);
    quiz.classList.add('hidden');
    resultado.classList.remove('hidden');
    scoreText.textContent = `Has respondido correctamente ${puntuacion} de ${preguntasDisponibles.length} preguntas.`;
  }

  // Control remoto (teclas)
  document.addEventListener('keydown', (e) => {
    if (menu.classList.contains('hidden')) return; // solo en menú
    if(e.key === 'Enter' || e.key === ' ') {
      if(!startBtn.disabled) {
        startBtn.click();
      }
    }
  });
</script>

</body>
</html>
